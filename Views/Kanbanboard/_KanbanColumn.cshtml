@model dynamic
@{
    string title = Model.Title;
    string uiStatus = Model.UiStatus;
    var projects = (IEnumerable<PronaFlow_MVC.Models.ViewModels.KanbanProjectCardViewModel>)Model.Projects;
    var popoverId = $"kanban-col-options-{uiStatus}";
}
@* Model c√≥ Title, UiStatus, Projects *@
<div class="kanban-column">
    <div class="kanban-column__header">
        <div class="column__title">@Model.Title</div>
        <div class="column__actions">
            @using (Html.BeginForm("CreateMinimal", "Project", FormMethod.Post, new { @class = "inline-add-project-form" }))
            {
                @Html.AntiForgeryToken()
                @Html.Hidden("workspaceId", (int)ViewBag.CurrentWorkspaceId)
                @Html.Hidden("status", (string)Model.UiStatus)
                <input type="text" name="name" class="form-input form-input--small" placeholder="Project name" required />
                <button type="submit" class="btn btn--primary btn--small">Add</button>
            }
        </div>
        <button class="btn icon-btn add-project-btn">
            <i data-lucide="plus" class="btn-icon"></i>
        </button>
        <h3>@title</h3>
        <button class="btn icon-btn btn-kanban-col-options-@uiStatus" popovertarget="@popoverId">
            <i data-lucide="ellipsis-vertical" class="btn-icon"></i>
        </button>
    </div>
    <div class="divider"></div>
    <div class="list-card hide-scrollbar">
        @foreach (var project in projects)
        {
            @Html.Partial("_ProjectCard", project)
        }
    </div>

    <div popover class="popover kanban-col-options-@uiStatus" id="@popoverId">
        <div class="popover__header">
            <span class="popover__title">Column Options</span>
            <button type="button">
                <i data-lucide="x" class="icon-sm"></i>
            </button>
        </div>
        <div class="popover__body">
            <button type="button" class="popover-item add-card-in-popover">Add card</button>
            <button type="button" class="popover-item">Move all cards in this state</button>
            <button type="button" class="popover-item">
                <span>Set all cards of State to </span>
                <select>
                    <option value="temp">Temp</option>
                    <option value="not-started">Not Started</option>
                    <option value="in-progress">In Progress</option>
                    <option value="in-review">In Review</option>
                    <option value="done">Done</option>
                </select>
            </button>
            <button type="button" class="popover-item btn-danger">Remove all cards of this [state]</button>
            <button type="button" class="popover-item">Archive all cards of this [state]</button>
        </div>
    </div>
</div>